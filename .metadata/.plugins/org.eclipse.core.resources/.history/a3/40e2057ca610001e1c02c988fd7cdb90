package com.example.demo;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase;
import org.springframework.boot.test.autoconfigure.jdbc.AutoConfigureTestDatabase.Replace;
import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;

import com.example.demo.model.entity.City;
import com.example.demo.model.entity.Country;
import com.example.demo.model.repo.CityRepo;
import com.example.demo.model.repo.CountryRepo;

import lombok.extern.slf4j.Slf4j;


@DataJpaTest
@AutoConfigureTestDatabase(replace = Replace.NONE)
@Slf4j
public class CityRepoTest {
	//City Repo 쓰고 싶엉요
	@Autowired
	CityRepo cityrepo;
	@Autowired
	CountryRepo countryRepo;
	// 시티 페포를 인플리먼트한 ???
	@Test
	public void beanTest() {
		log.debug("repo : {}", cityrepo.getClass().getName());
	}
	
	
	@Test
	public void crudTest() {
		//city 가 포함된 country가 필요
		Country c = countryRepo.findById("ABW");
		
		
		long cnt = cityrepo.count();
		log.debug("현재건수 : {}", cnt);
		//City city = City.builder().name("내 도시")
	}
	
}
